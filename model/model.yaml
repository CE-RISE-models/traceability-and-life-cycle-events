id: https://ce-rise-models.codeberg.page/traceability-and-life-cycle-events/
name: traceability_and_life_cycle_events
title: Traceability and Life Cycle Events Data Model
description: Dynamic event-based information throughout product supply chain journey aligned with GS1 EPCIS 2.0 standard
license: https://creativecommons.org/licenses/by-nc/4.0/
version: 0.0.1

prefixes:
    linkml: https://w3id.org/linkml/
    trc: https://ce-rise-models.codeberg.page/traceability-and-life-cycle-events/
    epcis: https://ns.gs1.org/epcis/
    cbv: https://ns.gs1.org/cbv/
    schema: http://schema.org/

imports:
    - linkml:types
    - https://ns.gs1.org/epcis/
    - https://ns.gs1.org/cbv/

default_range: string

# Root class
classes:
    TraceabilityLifecycleEvents:
        description: Root container for all traceability and lifecycle events in a product journey
        tree_root: true
        attributes:
            product_history:
                range: ProductHistory
                description: Foundation for all lifecycle events with complete audit trail
                multivalued: true
            ownership_event:
                range: OwnershipEvent
                description: Legal ownership and custody transfers throughout supply chain
                multivalued: true
            value_adding_activity:
                range: ValueAddingActivityLocation
                description: Transformation and processing events that modify or enhance products
                multivalued: true
            actor_tracking:
                range: ActorTracking
                description: All supply chain participants and their interactions with products
                multivalued: true
            logistics_events:
                range: LogisticsEvents
                description: Supply chain transportation and movement tracking post-import
                multivalued: true
            reverse_logistics:
                range: ReverseLogistics
                description: End-of-life and return pathway management
                multivalued: true

    ProductHistory:
        description: EPCIS-compatible base event structure for complete product lifecycle audit trail
        attributes:
            event_identifier:
                range: string
                description: Unique identifier for each event - aligns with EPCIS eventID concept
                annotations:
                    sql_identifier: trc_hist_event_id
                pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"

            event_identifier_value:
                range: string
                description: Value holder for event identifier

            event_timestamp:
                range: datetime
                description: ISO 8601 timestamp with timezone - aligns with EPCIS eventTime concept
                annotations:
                    sql_identifier: trc_hist_event_timestamp

            event_timestamp_value:
                range: string
                description: Value holder for event timestamp

            event_type:
                range: epcis:EventType
                description: Uses EPCIS EventType vocabulary directly - ObjectEvent TransactionEvent etc
                annotations:
                    sql_identifier: trc_hist_event_type

            event_type_value:
                range: string
                description: Value holder for event type

            event_location:
                range: string
                description: GLN or URI for location - aligns with EPCIS readPoint/bizLocation concepts
                annotations:
                    sql_identifier: trc_hist_event_location
                pattern: "^(urn:epc:id:sgln:|https?://|[0-9]{13}).*"

            event_location_value:
                range: string
                description: Value holder for event location

            event_description:
                range: string
                description: Human-readable event description extends EPCIS
                annotations:
                    sql_identifier: trc_hist_event_description

            event_description_value:
                range: string
                description: Value holder for event description

            linked_product_identifier:
                range: string
                description: EPC URI or GTIN plus serial reference - aligns with EPCIS epcList concept
                annotations:
                    sql_identifier: trc_hist_linked_product_id
                pattern: "^(urn:epc:id:|[0-9]{14}:).*"

            linked_product_identifier_value:
                range: string
                description: Value holder for linked product identifier

            disposition:
                range: string
                description: Business state of objects - aligns with EPCIS disposition concept
                annotations:
                    sql_identifier: trc_hist_disposition

            disposition_value:
                range: string
                description: Value holder for disposition

            biz_step:
                range: cbv:BizStep
                description: Uses CBV BizStep vocabulary directly
                annotations:
                    sql_identifier: trc_hist_biz_step

            biz_step_value:
                range: string
                description: Value holder for business step

            action:
                range: epcis:Action
                description: Uses EPCIS Action vocabulary directly - ADD OBSERVE DELETE
                annotations:
                    sql_identifier: trc_hist_action

            action_value:
                range: string
                description: Value holder for action

            event_time_zone_offset:
                range: string
                description: Time zone offset from UTC like +01:00 or -05:00
                annotations:
                    sql_identifier: trc_hist_timezone_offset
                pattern: "^[+-][0-9]{2}:[0-9]{2}$"

            event_time_zone_offset_value:
                range: string
                description: Value holder for timezone offset

            read_point:
                range: string
                description: Specific location where event occurred EPCIS readPoint
                annotations:
                    sql_identifier: trc_hist_read_point

            read_point_value:
                range: string
                description: Value holder for read point

            biz_location:
                range: string
                description: Business location where objects are expected following event EPCIS bizLocation
                annotations:
                    sql_identifier: trc_hist_biz_location

            biz_location_value:
                range: string
                description: Value holder for business location

            error_declaration:
                range: ErrorDeclaration
                description: Declaration that this event is in error EPCIS errorDeclaration

            certification_info:
                range: string
                description: Reference to relevant certifications for this event
                annotations:
                    sql_identifier: trc_hist_certification_info

            certification_info_value:
                range: string
                description: Value holder for certification info

            sensor_metadata:
                range: string
                description: IoT sensor data associated with event temperature humidity etc
                annotations:
                    sql_identifier: trc_hist_sensor_metadata

            sensor_metadata_value:
                range: string
                description: Value holder for sensor metadata

    OwnershipEvent:
        description: Legal ownership and custody transfers extending EPCIS TransactionEvent
        attributes:
            transfer_date:
                range: datetime
                description: Precise timestamp of ownership change - aligns with EPCIS eventTime concept
                annotations:
                    sql_identifier: trc_owner_transfer_date

            transfer_date_value:
                range: string
                description: Value holder for transfer date

            previous_owner:
                range: string
                description: Source party GLN - aligns with EPCIS source concept
                annotations:
                    sql_identifier: trc_owner_previous_owner
                pattern: "^[0-9]{13}$"

            previous_owner_value:
                range: string
                description: Value holder for previous owner

            new_owner:
                range: string
                description: Destination party GLN - aligns with EPCIS destination concept
                annotations:
                    sql_identifier: trc_owner_new_owner
                pattern: "^[0-9]{13}$"

            new_owner_value:
                range: string
                description: Value holder for new owner

            transfer_type:
                range: cbv:BTT
                description: Uses CBV Business Transaction Type vocabulary directly - po desadv inv rma etc
                annotations:
                    sql_identifier: trc_owner_transfer_type
                    epcis_cbv_aligned: true

            transfer_type_value:
                range: string
                description: Value holder for transfer type

            transfer_location:
                range: string
                description: Physical location GLN - aligns with EPCIS bizLocation concept
                annotations:
                    sql_identifier: trc_owner_transfer_location
                pattern: "^[0-9]{13}$"

            transfer_location_value:
                range: string
                description: Value holder for transfer location

            chain_of_custody_reference:
                range: string
                multivalued: true
                description: Previous event links EPCIS extensions
                annotations:
                    sql_identifier: trc_owner_custody_chain

            chain_of_custody_reference_value:
                range: string
                description: Value holder for custody chain references

            ownership_documentation:
                range: string
                multivalued: true
                description: Digital references EPCIS bizTransactionList URIs to documents
                annotations:
                    sql_identifier: trc_owner_documentation

            ownership_documentation_value:
                range: string
                description: Value holder for ownership documentation

            action:
                range: ActionEnum
                description: EPCIS action ADD OBSERVE DELETE
                annotations:
                    sql_identifier: trc_owner_action

            action_value:
                range: string
                description: Value holder for action

            linked_product_identifier:
                range: string
                description: Reference to products being transferred - aligns with EPCIS epcList concept
                annotations:
                    sql_identifier: trc_owner_linked_product
                pattern: "^(urn:epc:id:|[0-9]{14}:).*"

            linked_product_identifier_value:
                range: string
                description: Value holder for linked product identifier

            quantity_transferred:
                range: integer
                description: Number of units transferred
                annotations:
                    sql_identifier: trc_owner_quantity

            quantity_transferred_value:
                range: string
                description: Value holder for quantity transferred

            transfer_value:
                range: float
                description: Monetary value of transfer
                annotations:
                    sql_identifier: trc_owner_transfer_value

            transfer_value_value:
                range: string
                description: Value holder for transfer monetary value

            currency:
                range: string
                description: Currency code for transfer value ISO 4217
                annotations:
                    sql_identifier: trc_owner_currency
                pattern: "^[A-Z]{3}$"

            currency_value:
                range: string
                description: Value holder for currency

            ownership_status:
                range: OwnershipStatusEnum
                description: Legal status of ownership after transfer DPP extension beyond EPCIS
                annotations:
                    sql_identifier: trc_owner_status
                    dpp_extension: true

            ownership_status_value:
                range: string
                description: Value holder for ownership status

    ValueAddingActivityLocation:
        description: Transformation and processing events extending EPCIS TransformationEvent
        attributes:
            activity_identifier:
                range: string
                description: Unique activity reference - aligns with EPCIS eventID concept
                annotations:
                    sql_identifier: trc_value_activity_id
                pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"

            activity_identifier_value:
                range: string
                description: Value holder for activity identifier

            activity_type:
                range: cbv:BizStep
                description: Uses CBV BizStep vocabulary directly - commissioning transformation decommissioning
                annotations:
                    sql_identifier: trc_value_activity_type
                    epcis_cbv_aligned: true

            activity_type_value:
                range: string
                description: Value holder for activity type

            activity_date:
                range: datetime
                description: When activity occurred - aligns with EPCIS eventTime concept
                annotations:
                    sql_identifier: trc_value_activity_date

            activity_date_value:
                range: string
                description: Value holder for activity date

            facility_identifier:
                range: string
                description: Facility GLN where activity occurred - aligns with EPCIS bizLocation concept
                annotations:
                    sql_identifier: trc_value_facility_id
                pattern: "^[0-9]{13}$"

            facility_identifier_value:
                range: string
                description: Value holder for facility identifier

            process_description:
                range: string
                description: Detailed transformation process description EPCIS extension
                annotations:
                    sql_identifier: trc_value_process_desc
                    dpp_extension: true

            process_description_value:
                range: string
                description: Value holder for process description

            input_products:
                range: string
                multivalued: true
                description: Input EPCs and quantities - aligns with EPCIS inputEPCList concept
                annotations:
                    sql_identifier: trc_value_input_products

            input_products_value:
                range: string
                description: Value holder for input products

            output_products:
                range: string
                multivalued: true
                description: Output EPCs and quantities - aligns with EPCIS outputEPCList concept
                annotations:
                    sql_identifier: trc_value_output_products

            output_products_value:
                range: string
                description: Value holder for output products

            transformation_id:
                range: string
                description: Links related transformations - aligns with EPCIS transformationID concept
                annotations:
                    sql_identifier: trc_value_transformation_id

            transformation_id_value:
                range: string
                description: Value holder for transformation ID

            process_step:
                range: string
                description: Specific process step within transformation EPCIS bizStep
                annotations:
                    sql_identifier: trc_value_process_step
                    epcis_cbv_aligned: true

            process_step_value:
                range: string
                description: Value holder for process step

            quality_check_performed:
                range: boolean
                description: Whether quality control was performed DPP extension
                annotations:
                    sql_identifier: trc_value_quality_check
                    dpp_extension: true

            quality_check_performed_value:
                range: string
                description: Value holder for quality check flag

            quality_check_results:
                range: string
                description: Quality control test results DPP extension
                annotations:
                    sql_identifier: trc_value_quality_results
                    dpp_extension: true

            quality_check_results_value:
                range: string
                description: Value holder for quality results

            process_duration_minutes:
                range: integer
                description: Duration of the process in minutes DPP extension
                annotations:
                    sql_identifier: trc_value_duration_min
                    dpp_extension: true

            process_duration_minutes_value:
                range: string
                description: Value holder for process duration

            operator_identifier:
                range: string
                description: GLN or ID of operator performing activity
                annotations:
                    sql_identifier: trc_value_operator_id

            operator_identifier_value:
                range: string
                description: Value holder for operator identifier

            batch_identifier:
                range: string
                description: Batch or lot number for this processing run
                annotations:
                    sql_identifier: trc_value_batch_id

            batch_identifier_value:
                range: string
                description: Value holder for batch identifier

            value_added:
                range: float
                description: Economic value added by this activity DPP extension
                annotations:
                    sql_identifier: trc_value_added_amount
                    dpp_extension: true

            value_added_value:
                range: string
                description: Value holder for value added

            process_certification:
                range: string
                multivalued: true
                description: Certifications applicable to this process DPP extension
                annotations:
                    sql_identifier: trc_value_certifications
                    dpp_extension: true

            process_certification_value:
                range: string
                description: Value holder for process certifications

    ErrorDeclaration:
        description: Declaration that an event was recorded in error EPCIS errorDeclaration
        attributes:
            declaration_time:
                range: datetime
                required: true
                description: When the error was declared
                annotations:
                    sql_identifier: trc_hist_error_declaration_time

            declaration_time_value:
                range: string
                description: Value holder for declaration time

            reason:
                range: string
                description: Reason for the error declaration
                annotations:
                    sql_identifier: trc_hist_error_reason

            reason_value:
                range: string
                description: Value holder for error reason

            corrective_event_ids:
                range: string
                multivalued: true
                description: IDs of events that correct this error
                annotations:
                    sql_identifier: trc_hist_corrective_event_ids

            corrective_event_ids_value:
                range: string
                description: Value holder for corrective event IDs

    ActorTracking:
        description: Supply chain participants and their interactions with products
        attributes:
            actor_identifier:
                range: string
                description: Organization identifier GLN LEI or VAT
                annotations:
                    sql_identifier: trc_actor_id

            actor_identifier_value:
                range: string
                description: Value holder for actor identifier

            actor_role:
                range: string
                description: Role in supply chain - aligns with CBV party role concepts
                annotations:
                    sql_identifier: trc_actor_role

            actor_role_value:
                range: string
                description: Value holder for actor role

            activity_timestamp:
                range: datetime
                description: When actor interacted with product
                annotations:
                    sql_identifier: trc_actor_timestamp

            activity_timestamp_value:
                range: string
                description: Value holder for activity timestamp

            action_performed:
                range: string
                description: Specific action taken by actor
                annotations:
                    sql_identifier: trc_actor_action

            action_performed_value:
                range: string
                description: Value holder for action performed

            responsibility_scope:
                range: string
                description: Actor responsibility boundaries
                annotations:
                    sql_identifier: trc_actor_responsibility

            responsibility_scope_value:
                range: string
                description: Value holder for responsibility scope

            certification_status:
                range: string
                multivalued: true
                description: Relevant certifications ISO organic fair trade
                annotations:
                    sql_identifier: trc_actor_certifications

            certification_status_value:
                range: string
                description: Value holder for certification status

    LogisticsEvents:
        description: Supply chain transportation tracking post-import - aligns with EPCIS ObjectEvent concepts
        attributes:
            shipment_identifier:
                range: string
                description: Unique shipment reference carrier tracking number
                annotations:
                    sql_identifier: trc_logis_shipment_id

            shipment_identifier_value:
                range: string
                description: Value holder for shipment identifier

            transport_mode:
                range: string
                description: Mode of transport road rail sea air multimodal
                annotations:
                    sql_identifier: trc_logis_transport_mode

            transport_mode_value:
                range: string
                description: Value holder for transport mode

            departure_location:
                range: string
                description: Origin UN/LOCODE
                annotations:
                    sql_identifier: trc_logis_departure_loc

            departure_location_value:
                range: string
                description: Value holder for departure location

            departure_timestamp:
                range: datetime
                description: Departure time with timezone
                annotations:
                    sql_identifier: trc_logis_departure_time

            departure_timestamp_value:
                range: string
                description: Value holder for departure timestamp

            arrival_location:
                range: string
                description: Destination UN/LOCODE
                annotations:
                    sql_identifier: trc_logis_arrival_loc

            arrival_location_value:
                range: string
                description: Value holder for arrival location

            arrival_timestamp:
                range: datetime
                description: Actual or estimated arrival
                annotations:
                    sql_identifier: trc_logis_arrival_time

            arrival_timestamp_value:
                range: string
                description: Value holder for arrival timestamp

            carrier_identifier:
                range: string
                description: Transport company GLN or identifier
                annotations:
                    sql_identifier: trc_logis_carrier_id

            carrier_identifier_value:
                range: string
                description: Value holder for carrier identifier

            route_information:
                range: string
                description: Planned route details
                annotations:
                    sql_identifier: trc_logis_route_info

            route_information_value:
                range: string
                description: Value holder for route information

            intermediate_stops:
                range: IntermediateStop
                multivalued: true
                description: Distribution centers warehouses transshipment points

            transport_conditions:
                range: string
                description: Temperature humidity shock monitoring data
                annotations:
                    sql_identifier: trc_logis_conditions

            transport_conditions_value:
                range: string
                description: Value holder for transport conditions

    IntermediateStop:
        description: Stop location during logistics movement
        attributes:
            stop_location:
                range: string
                description: UN/LOCODE of stop location
                annotations:
                    sql_identifier: trc_logis_stop_location

            stop_location_value:
                range: string
                description: Value holder for stop location

            stop_timestamp:
                range: datetime
                description: When arrived at stop
                annotations:
                    sql_identifier: trc_logis_stop_time

            stop_timestamp_value:
                range: string
                description: Value holder for stop timestamp

            stop_duration:
                range: integer
                description: Duration at stop in minutes
                annotations:
                    sql_identifier: trc_logis_stop_duration

            stop_duration_value:
                range: string
                description: Value holder for stop duration

    ReverseLogistics:
        description: End-of-life and return pathway management beyond EPCIS scope
        attributes:
            return_event_identifier:
                range: string
                description: Unique return tracking ID
                annotations:
                    sql_identifier: trc_reverse_event_id

            return_event_identifier_value:
                range: string
                description: Value holder for return event identifier

            return_initiation_date:
                range: datetime
                description: When return process started
                annotations:
                    sql_identifier: trc_reverse_init_date

            return_initiation_date_value:
                range: string
                description: Value holder for return initiation date

            return_reason:
                range: ReturnReasonEnum
                description: Reason for return
                annotations:
                    sql_identifier: trc_reverse_reason

            return_reason_value:
                range: string
                description: Value holder for return reason

            customer_return_channels:
                range: CustomerReturnChannel
                multivalued: true
                description: Available return methods and locations

            refurbishment_event:
                range: RefurbishmentEvent
                description: Repair and refurbishment activities

            recycling_event:
                range: RecyclingEvent
                description: Material recovery and recycling processes

            disposal_event:
                range: DisposalEvent
                description: Final disposal method and certification

    CustomerReturnChannel:
        description: Return channel information
        attributes:
            return_location:
                range: string
                description: GLN of return collection point
                annotations:
                    sql_identifier: trc_reverse_return_loc

            return_location_value:
                range: string
                description: Value holder for return location

            return_method:
                range: ReturnMethodEnum
                description: How product can be returned
                annotations:
                    sql_identifier: trc_reverse_method

            return_method_value:
                range: string
                description: Value holder for return method

            return_documentation:
                range: string
                description: Required documentation for return
                annotations:
                    sql_identifier: trc_reverse_docs

            return_documentation_value:
                range: string
                description: Value holder for return documentation

    RefurbishmentEvent:
        description: Product repair and refurbishment details
        attributes:
            refurbishment_date:
                range: datetime
                description: When refurbishment occurred
                annotations:
                    sql_identifier: trc_reverse_refurb_date

            refurbishment_date_value:
                range: string
                description: Value holder for refurbishment date

            refurbishment_activities:
                range: string
                multivalued: true
                description: List of refurbishment activities performed
                annotations:
                    sql_identifier: trc_reverse_refurb_activities

            refurbishment_activities_value:
                range: string
                description: Value holder for refurbishment activities

            components_replaced:
                range: string
                multivalued: true
                description: Components that were replaced
                annotations:
                    sql_identifier: trc_reverse_components

            components_replaced_value:
                range: string
                description: Value holder for components replaced

            refurbishment_certification:
                range: string
                description: Certification of refurbishment quality
                annotations:
                    sql_identifier: trc_reverse_refurb_cert

            refurbishment_certification_value:
                range: string
                description: Value holder for refurbishment certification

    RecyclingEvent:
        description: Material recovery and recycling details
        attributes:
            recycling_date:
                range: datetime
                description: When recycling occurred
                annotations:
                    sql_identifier: trc_reverse_recycle_date

            recycling_date_value:
                range: string
                description: Value holder for recycling date

            recycling_stream:
                range: RecyclingStreamEnum
                description: Which recycling stream
                annotations:
                    sql_identifier: trc_reverse_stream

            recycling_stream_value:
                range: string
                description: Value holder for recycling stream

            materials_recovered:
                range: string
                multivalued: true
                description: List of recovered materials
                annotations:
                    sql_identifier: trc_reverse_materials

            materials_recovered_value:
                range: string
                description: Value holder for materials recovered

            recovery_percentage:
                range: float
                description: Percentage of materials recovered
                annotations:
                    sql_identifier: trc_reverse_recovery_pct

            recovery_percentage_value:
                range: string
                description: Value holder for recovery percentage

    DisposalEvent:
        description: Final disposal details
        attributes:
            disposal_date:
                range: datetime
                description: When disposal occurred
                annotations:
                    sql_identifier: trc_reverse_disposal_date

            disposal_date_value:
                range: string
                description: Value holder for disposal date

            disposal_method:
                range: DisposalMethodEnum
                description: Method of disposal
                annotations:
                    sql_identifier: trc_reverse_disposal_method

            disposal_method_value:
                range: string
                description: Value holder for disposal method

            disposal_facility:
                range: string
                description: GLN or identifier of disposal facility
                annotations:
                    sql_identifier: trc_reverse_disposal_facility

            disposal_facility_value:
                range: string
                description: Value holder for disposal facility

            disposal_certification:
                range: string
                description: Certification of proper disposal
                annotations:
                    sql_identifier: trc_reverse_disposal_cert

            disposal_certification_value:
                range: string
                description: Value holder for disposal certification

# Enumerations aligned with EPCIS/CBV standards
enums:
    OwnershipStatusEnum:
        description: Legal status of ownership - DPP extension beyond EPCIS standard
        permissible_values:
            FULL_OWNERSHIP:
                description: Complete legal ownership
            CONDITIONAL:
                description: Conditional ownership pending payment
            CONSIGNED:
                description: Owned but consigned to another party
            LEASED:
                description: Under lease agreement
            IN_TRANSIT:
                description: Ownership during transportation
            DISPUTED:
                description: Ownership under dispute

    ReturnReasonEnum:
        description: Reasons for product return - DPP specific
        permissible_values:
            DEFECT:
                description: Product defect or malfunction
            WARRANTY_CLAIM:
                description: Warranty claim
            END_OF_LIFE:
                description: Product reached end of life
            PRODUCT_RECALL:
                description: Manufacturer recall
            CUSTOMER_DISSATISFACTION:
                description: Customer not satisfied

    ReturnMethodEnum:
        description: How product was returned - DPP specific
        permissible_values:
            STORE_RETURN:
                description: Returned to retail store
            MAIL_RETURN:
                description: Mailed back
            PICKUP_SERVICE:
                description: Pickup service collected
            DROP_OFF_POINT:
                description: Dropped at collection point

    RecyclingStreamEnum:
        description: Recycling pathways - DPP specific
        permissible_values:
            ELECTRONICS:
                description: E-waste recycling
            PLASTICS:
                description: Plastic recycling
            METALS:
                description: Metal recycling
            TEXTILES:
                description: Textile recycling
            BATTERIES:
                description: Battery recycling
            MIXED_MATERIALS:
                description: Mixed material recycling

    DisposalMethodEnum:
        description: Final disposal methods - DPP specific
        permissible_values:
            LANDFILL:
                description: Landfill disposal
            INCINERATION:
                description: Incineration
            ENERGY_RECOVERY:
                description: Waste-to-energy
            COMPOSTING:
                description: Industrial composting
            SPECIALIZED_TREATMENT:
                description: Specialized hazardous treatment
